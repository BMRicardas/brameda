---
import Branding from "./ui/branding.astro";
import Container from "./ui/container.astro";
import Navigation from "./ui/navigation.astro";

const headerLinks = [
  {
    href: "/#products",
    text: "Produktai",
  },
  {
    href: "#about",
    text: "Apie mus",
  },
  {
    href: "#contacts",
    text: "Kontaktai",
  },
];
---

<header class="header">
  <Container innerContentClassList="headerContainer">
    <Branding />
    <Navigation links={headerLinks} />
  </Container>
</header>

<style>
  .header {
    background-color: var(--color-white);
    position: sticky;
    inset-block-start: 0;
    inset-inline: 0;
    anchor-name: --header;
    z-index: 100;

    animation-name: scrolledHeader;

    transition-duration: var(--transition-duration);
    animation-fill-mode: var(--animation-fill-mode);
    animation-timeline: var(--animation-timeline);
    animation-range-start: var(--animation-range-start);
    animation-range-end: var(--animation-range-end);
  }

  :global(.headerContainer) {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 100%;
  }

  @keyframes scrolledHeader {
    from {
      box-shadow: transparent;
    }
    to {
      box-shadow: 0 0 5px 3px rgba(0, 0, 0, 0.15);
    }
  }
</style>

<script>
  if (!CSS.supports("position-anchor: --header")) {
    function setHeaderHeight() {
      const header = document.querySelector(".header") as HTMLElement | null;
      if (header) {
        document.documentElement.style.setProperty(
          "--header-height",
          `${header.offsetHeight}px`
        );
      }
    }

    setHeaderHeight();

    window.addEventListener("resize", setHeaderHeight);
  }
</script>
