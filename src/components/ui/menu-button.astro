<!-- ---
import Image from "astro/components/Image.astro";
import close from "public/assets/close.svg";
import hamburgerMenu from "public/assets/hamburger-menu.svg";

const MENU_BUTTON_SIZE = 50;
---

<button
  aria-controls="mobile-menu"
  class="menu-toggle"
  data-expanded="false"
  id="menu-button"
  popovertarget="mobile-menu"
  type="button">
  <Image
    alt="Menu icon"
    height={MENU_BUTTON_SIZE}
    id="open-menu-image"
    loading="eager"
    src={hamburgerMenu}
    width={MENU_BUTTON_SIZE}
  />
  <Image
    alt="Menu icon"
    height={MENU_BUTTON_SIZE}
    id="close-menu-image"
    loading="eager"
    src={close}
    width={MENU_BUTTON_SIZE}
  />
</button>

<style>
  .menu-toggle {
    display: none;
    margin-inline-end: var(--scrollbar-width);
  }

  #open-menu-image {
    display: block;
  }

  #close-menu-image {
    display: none;
  }

  @media only screen and (max-width: 50em) {
    .menu-toggle {
      display: block;
      position: fixed;
      top: calc((74 / 10) * 1px);
      right: 1rem;
      background: transparent;
      border: none;
      cursor: pointer;
      color: currentColor;
      padding: 0;
      z-index: 100;
      transition: transform var(--transition-duration);

      animation-name: scrolledMenuButton;

      transition-duration: var(--transition-duration);
      animation-fill-mode: var(--animation-fill-mode);
      animation-timeline: var(--animation-timeline);
      animation-range-start: var(--animation-range-start);
      animation-range-end: var(--animation-range-end);
    }

    /* .menu-toggle[aria-expanded="true"] {
      transform: rotate(90deg);
    } */
  }

  @keyframes scrolledMenuButton {
    from {
      top: calc((74 / 10) * 1px);
    }
    to {
      top: calc((65 / 10) * 1px);
    }
  }
</style>

<script>
  const menuButton = document.getElementById(
    "menu-button"
  ) as HTMLButtonElement;
  const mobileMenu = document.getElementById("mobile-menu") as HTMLElement;
  const openMenuImage = document.getElementById(
    "open-menu-image"
  ) as HTMLImageElement;
  const closeMenuImage = document.getElementById(
    "close-menu-image"
  ) as HTMLImageElement;

  menuButton.addEventListener("click", () => {
    const expanded = menuButton.dataset.expanded === "true";

    console.log({ expanded });

    menuButton.dataset.expanded = expanded ? "false" : "true";

    menuButton.setAttribute("aria-expanded", expanded ? "false" : "true");
    mobileMenu.setAttribute(
      "aria-label",
      expanded ? "Open navigation menu" : "Close navigation menu"
    );
    mobileMenu.setAttribute(
      "popover-target-action",
      expanded ? "hide" : "show"
    );
    openMenuImage.style.display = expanded ? "block" : "none";
    closeMenuImage.style.display = expanded ? "none" : "block";
  });
</script> -->
